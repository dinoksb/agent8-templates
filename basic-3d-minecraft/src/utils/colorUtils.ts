import * as THREE from 'three';
import { TILE_TYPES } from '../constants/tiles';

// 면의 인덱스 정의 (참조용)
export const FACE_INDEX = {
  FRONT: 0, // 앞면
  RIGHT: 1, // 오른쪽
  BACK: 2, // 뒷면
  LEFT: 3, // 왼쪽
  TOP: 4, // 상단
  BOTTOM: 5, // 하단
};

// 모든 타일의 모든 면 색상을 직접 정의
export const ALL_CUBE_COLORS: Record<number, Array<{ r: number; g: number; b: number }>> = {
  // 0번 타일 (기본 회색)
  0: [
    { r: 0.4, g: 0.4, b: 0.4 }, // 앞면
    { r: 0.4, g: 0.4, b: 0.4 }, // 오른쪽
    { r: 0.4, g: 0.4, b: 0.4 }, // 뒷면
    { r: 0.4, g: 0.4, b: 0.4 }, // 왼쪽
    { r: 0.4, g: 0.4, b: 0.4 }, // 상단
    { r: 0.4, g: 0.4, b: 0.4 }, // 하단
  ],

  // 1번 타일 (잔디)
  1: [
    { r: 0.6, g: 0.3, b: 0.0 }, // 앞면 (흙)
    { r: 0.6, g: 0.3, b: 0.0 }, // 오른쪽 (흙)
    { r: 0.6, g: 0.3, b: 0.0 }, // 뒷면 (흙)
    { r: 0.6, g: 0.3, b: 0.0 }, // 왼쪽 (흙)
    { r: 0.0, g: 0.8, b: 0.0 }, // 상단 (녹색 잔디)
    { r: 0.6, g: 0.3, b: 0.0 }, // 하단 (흙)
  ],

  // 2번 타일 (흙)
  2: [
    { r: 0.6, g: 0.3, b: 0.0 }, // 앞면
    { r: 0.6, g: 0.3, b: 0.0 }, // 오른쪽
    { r: 0.6, g: 0.3, b: 0.0 }, // 뒷면
    { r: 0.6, g: 0.3, b: 0.0 }, // 왼쪽
    { r: 0.6, g: 0.3, b: 0.0 }, // 상단
    { r: 0.6, g: 0.3, b: 0.0 }, // 하단
  ],

  // 3번 타일 (돌)
  3: [
    { r: 0.6, g: 0.55, b: 0.5 }, // 앞면
    { r: 0.55, g: 0.5, b: 0.45 }, // 오른쪽
    { r: 0.5, g: 0.45, b: 0.4 }, // 뒷면
    { r: 0.55, g: 0.5, b: 0.45 }, // 왼쪽
    { r: 0.65, g: 0.6, b: 0.55 }, // 상단
    { r: 0.5, g: 0.45, b: 0.4 }, // 하단
  ],

  // 4번 타일 (자갈)
  4: [
    { r: 0.45, g: 0.45, b: 0.4 }, // 앞면
    { r: 0.4, g: 0.4, b: 0.35 }, // 오른쪽
    { r: 0.35, g: 0.35, b: 0.3 }, // 뒷면
    { r: 0.4, g: 0.4, b: 0.35 }, // 왼쪽
    { r: 0.5, g: 0.5, b: 0.45 }, // 상단
    { r: 0.35, g: 0.35, b: 0.3 }, // 하단
  ],

  // 5번 타일 (기반암)
  5: [
    { r: 0.2, g: 0.2, b: 0.2 }, // 앞면
    { r: 0.2, g: 0.2, b: 0.2 }, // 오른쪽
    { r: 0.2, g: 0.2, b: 0.2 }, // 뒷면
    { r: 0.2, g: 0.2, b: 0.2 }, // 왼쪽
    { r: 0.2, g: 0.2, b: 0.2 }, // 상단
    { r: 0.2, g: 0.2, b: 0.2 }, // 하단
  ],

  // 6번 타일 (나무 판자)
  6: [
    { r: 0.8, g: 0.5, b: 0.2 }, // 앞면
    { r: 0.75, g: 0.45, b: 0.15 }, // 오른쪽
    { r: 0.7, g: 0.4, b: 0.1 }, // 뒷면
    { r: 0.75, g: 0.45, b: 0.15 }, // 왼쪽
    { r: 0.85, g: 0.55, b: 0.25 }, // 상단
    { r: 0.7, g: 0.4, b: 0.1 }, // 하단
  ],

  // 7번 타일 (작은 나무 묘목)
  7: [
    { r: 0.0, g: 0.7, b: 0.1 }, // 앞면
    { r: 0.0, g: 0.65, b: 0.1 }, // 오른쪽
    { r: 0.0, g: 0.6, b: 0.1 }, // 뒷면
    { r: 0.0, g: 0.65, b: 0.1 }, // 왼쪽
    { r: 0.0, g: 0.75, b: 0.1 }, // 상단
    { r: 0.0, g: 0.6, b: 0.1 }, // 하단
  ],

  // 8번 타일 (대체 기반암)
  8: [
    { r: 0.3, g: 0.3, b: 0.3 }, // 앞면
    { r: 0.3, g: 0.3, b: 0.3 }, // 오른쪽
    { r: 0.3, g: 0.3, b: 0.3 }, // 뒷면
    { r: 0.3, g: 0.3, b: 0.3 }, // 왼쪽
    { r: 0.3, g: 0.3, b: 0.3 }, // 상단
    { r: 0.3, g: 0.3, b: 0.3 }, // 하단
  ],

  // 9번 타일 (물)
  9: [
    { r: 0.0, g: 0.0, b: 0.7 }, // 앞면
    { r: 0.0, g: 0.0, b: 0.7 }, // 오른쪽
    { r: 0.0, g: 0.0, b: 0.7 }, // 뒷면
    { r: 0.0, g: 0.0, b: 0.7 }, // 왼쪽
    { r: 0.0, g: 0.2, b: 0.9 }, // 상단
    { r: 0.0, g: 0.0, b: 0.6 }, // 하단
  ],

  // 10번 타일 (용암)
  10: [
    { r: 0.9, g: 0.3, b: 0.0 }, // 앞면
    { r: 0.9, g: 0.3, b: 0.0 }, // 오른쪽
    { r: 0.9, g: 0.3, b: 0.0 }, // 뒷면
    { r: 0.9, g: 0.3, b: 0.0 }, // 왼쪽
    { r: 1.0, g: 0.4, b: 0.0 }, // 상단
    { r: 0.7, g: 0.2, b: 0.0 }, // 하단
  ],

  // 11번 타일 (모래)
  11: [
    { r: 0.9, g: 0.8, b: 0.2 }, // 앞면
    { r: 0.85, g: 0.75, b: 0.18 }, // 오른쪽
    { r: 0.85, g: 0.75, b: 0.18 }, // 뒷면
    { r: 0.85, g: 0.75, b: 0.18 }, // 왼쪽
    { r: 0.95, g: 0.85, b: 0.25 }, // 상단
    { r: 0.85, g: 0.75, b: 0.18 }, // 하단
  ],

  // 12번 타일 (자갈)
  12: [
    { r: 0.6, g: 0.6, b: 0.6 }, // 앞면
    { r: 0.55, g: 0.55, b: 0.55 }, // 오른쪽
    { r: 0.5, g: 0.5, b: 0.5 }, // 뒷면
    { r: 0.55, g: 0.55, b: 0.55 }, // 왼쪽
    { r: 0.65, g: 0.65, b: 0.65 }, // 상단
    { r: 0.5, g: 0.5, b: 0.5 }, // 하단
  ],

  // 13번 타일 (금 광석)
  13: [
    { r: 0.7, g: 0.7, b: 0.4 }, // 앞면
    { r: 0.65, g: 0.65, b: 0.35 }, // 오른쪽
    { r: 0.6, g: 0.6, b: 0.3 }, // 뒷면
    { r: 0.65, g: 0.65, b: 0.35 }, // 왼쪽
    { r: 0.75, g: 0.75, b: 0.45 }, // 상단
    { r: 0.6, g: 0.6, b: 0.3 }, // 하단
  ],

  // 14번 타일 (철 광석)
  14: [
    { r: 0.7, g: 0.5, b: 0.5 }, // 앞면
    { r: 0.65, g: 0.45, b: 0.45 }, // 오른쪽
    { r: 0.6, g: 0.4, b: 0.4 }, // 뒷면
    { r: 0.65, g: 0.45, b: 0.45 }, // 왼쪽
    { r: 0.75, g: 0.55, b: 0.55 }, // 상단
    { r: 0.6, g: 0.4, b: 0.4 }, // 하단
  ],

  // 15번 타일 (석탄 광석)
  15: [
    { r: 0.35, g: 0.3, b: 0.25 }, // 앞면
    { r: 0.3, g: 0.25, b: 0.2 }, // 오른쪽
    { r: 0.25, g: 0.2, b: 0.15 }, // 뒷면
    { r: 0.3, g: 0.25, b: 0.2 }, // 왼쪽
    { r: 0.4, g: 0.35, b: 0.3 }, // 상단
    { r: 0.25, g: 0.2, b: 0.15 }, // 하단
  ],

  // 16번 타일 (나무 줄기)
  16: [
    { r: 0.5, g: 0.3, b: 0.0 }, // 앞면
    { r: 0.5, g: 0.3, b: 0.0 }, // 오른쪽
    { r: 0.5, g: 0.3, b: 0.0 }, // 뒷면
    { r: 0.5, g: 0.3, b: 0.0 }, // 왼쪽
    { r: 0.7, g: 0.4, b: 0.1 }, // 상단
    { r: 0.7, g: 0.4, b: 0.1 }, // 하단
  ],

  // 17번 타일 (나뭇잎)
  17: [
    { r: 0.0, g: 0.5, b: 0.0 }, // 앞면
    { r: 0.0, g: 0.45, b: 0.0 }, // 오른쪽
    { r: 0.0, g: 0.45, b: 0.0 }, // 뒷면
    { r: 0.0, g: 0.45, b: 0.0 }, // 왼쪽
    { r: 0.0, g: 0.6, b: 0.0 }, // 상단
    { r: 0.0, g: 0.4, b: 0.0 }, // 하단
  ],

  // 18번 타일 (유리)
  18: [
    { r: 0.2, g: 0.8, b: 0.8 }, // 앞면
    { r: 0.15, g: 0.7, b: 0.7 }, // 오른쪽
    { r: 0.1, g: 0.6, b: 0.6 }, // 뒷면
    { r: 0.15, g: 0.7, b: 0.7 }, // 왼쪽
    { r: 0.3, g: 0.9, b: 0.9 }, // 상단
    { r: 0.1, g: 0.6, b: 0.6 }, // 하단
  ],

  // 19번 타일 (하얀 양모)
  19: [
    { r: 1.0, g: 0.5, b: 0.8 }, // 앞면
    { r: 0.9, g: 0.4, b: 0.7 }, // 오른쪽
    { r: 0.8, g: 0.3, b: 0.6 }, // 뒷면
    { r: 0.9, g: 0.4, b: 0.7 }, // 왼쪽
    { r: 1.0, g: 0.6, b: 0.9 }, // 상단
    { r: 0.8, g: 0.3, b: 0.6 }, // 하단
  ],

  // 20번 타일 (노란 꽃)
  20: [
    { r: 1.0, g: 0.9, b: 0.3 }, // 앞면
    { r: 0.95, g: 0.85, b: 0.25 }, // 오른쪽
    { r: 0.9, g: 0.8, b: 0.2 }, // 뒷면
    { r: 0.95, g: 0.85, b: 0.25 }, // 왼쪽
    { r: 1.0, g: 1.0, b: 0.4 }, // 상단
    { r: 0.9, g: 0.8, b: 0.2 }, // 하단
  ],

  // 21번 타일 (빨간 꽃)
  21: [
    { r: 1.0, g: 0.0, b: 0.0 }, // 앞면
    { r: 0.9, g: 0.0, b: 0.0 }, // 오른쪽
    { r: 0.8, g: 0.0, b: 0.0 }, // 뒷면
    { r: 0.9, g: 0.0, b: 0.0 }, // 왼쪽
    { r: 1.0, g: 0.2, b: 0.2 }, // 상단
    { r: 0.8, g: 0.0, b: 0.0 }, // 하단
  ],

  // 22번 타일 (갈색 버섯)
  22: [
    { r: 0.6, g: 0.4, b: 0.2 }, // 앞면
    { r: 0.5, g: 0.3, b: 0.15 }, // 오른쪽
    { r: 0.4, g: 0.25, b: 0.1 }, // 뒷면
    { r: 0.5, g: 0.3, b: 0.15 }, // 왼쪽
    { r: 0.7, g: 0.45, b: 0.25 }, // 상단
    { r: 0.4, g: 0.25, b: 0.1 }, // 하단
  ],

  // 23번 타일 (빨간 버섯)
  23: [
    { r: 0.6, g: 0.2, b: 0.8 }, // 앞면
    { r: 0.5, g: 0.15, b: 0.7 }, // 오른쪽
    { r: 0.4, g: 0.1, b: 0.6 }, // 뒷면
    { r: 0.5, g: 0.15, b: 0.7 }, // 왼쪽
    { r: 0.7, g: 0.3, b: 0.9 }, // 상단
    { r: 0.4, g: 0.1, b: 0.6 }, // 하단
  ],

  // 24번 타일 (금 블록)
  24: [
    { r: 1.0, g: 0.8, b: 0.0 }, // 앞면
    { r: 0.95, g: 0.75, b: 0.0 }, // 오른쪽
    { r: 0.95, g: 0.75, b: 0.0 }, // 뒷면
    { r: 0.95, g: 0.75, b: 0.0 }, // 왼쪽
    { r: 1.0, g: 0.9, b: 0.0 }, // 상단
    { r: 0.9, g: 0.7, b: 0.0 }, // 하단
  ],

  // 25번 타일 (철 블록)
  25: [
    { r: 0.6, g: 0.65, b: 0.7 }, // 앞면
    { r: 0.55, g: 0.6, b: 0.65 }, // 오른쪽
    { r: 0.5, g: 0.55, b: 0.6 }, // 뒷면
    { r: 0.55, g: 0.6, b: 0.65 }, // 왼쪽
    { r: 0.65, g: 0.7, b: 0.75 }, // 상단
    { r: 0.5, g: 0.55, b: 0.6 }, // 하단
  ],
};

/**
 * 인덱스에서 타일 타입으로 변환
 * @param index 타일 인덱스 (0-based)
 * @returns 타일 타입 값 (1-based)
 */
export const getTileTypeFromIndex = (index: number): number => {
  // TILE_TYPES의 값 배열 가져오기
  const tileTypeValues = Object.values(TILE_TYPES);
  // 유효한 인덱스면 해당 타일 타입 반환, 아니면 기본값(0) 반환
  return index >= 0 && index < tileTypeValues.length ? tileTypeValues[index] : 0;
};

/**
 * 타일 인덱스와 면 방향에 따른 색상 반환
 * @param index 타일 인덱스
 * @param faceDirection 면 방향 (0-5)
 * @returns RGB 색상 객체
 */
export const getColorByFace = (index: number, faceDirection: number): { r: number; g: number; b: number } => {
  // 기본 색상 (회색)
  const defaultColor = { r: 0.5, g: 0.5, b: 0.5 };

  // 인덱스에 해당하는 면별 색상 반환
  if (ALL_CUBE_COLORS[index] && ALL_CUBE_COLORS[index][faceDirection]) {
    return ALL_CUBE_COLORS[index][faceDirection];
  }

  // 해당 색상이 없으면 기본 색상 반환
  return defaultColor;
};

/**
 * Three.js Color 객체로 변환
 * @param color RGB 색상 객체
 * @returns THREE.Color 객체
 */
export const getThreeColor = (color: { r: number; g: number; b: number }): THREE.Color => {
  return new THREE.Color(color.r, color.g, color.b);
};
